<div class="container mx-auto p-4 max-w-6xl">
  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <!-- Calendar Header -->
    <div class="flex justify-between items-center p-4 border-b">
      <div class="flex items-center space-x-4">
        <h1 class="text-2xl font-bold text-gray-800">Calendar</h1>
        <button
          (click)="goToToday()"
          class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium"
        >
          Today
        </button>
        <div class="flex space-x-2">
          <button
            (click)="navigatePrevious()"
            class="p-2 rounded-full hover:bg-gray-100"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 text-gray-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"
              ></path>
            </svg>
          </button>
          <button
            (click)="navigateNext()"
            class="p-2 rounded-full hover:bg-gray-100"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 text-gray-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"
              ></path>
            </svg>
          </button>
        </div>
        <h2 class="text-xl font-medium text-gray-700">{{ viewTitle }}</h2>
      </div>
      <div class="flex space-x-2">
        <button
          (click)="setView('month')"
          [class.bg-blue-100]="currentView === 'month'"
          class="px-4 py-2 border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"
        >
          Month
        </button>
        <button
          (click)="setView('week')"
          [class.bg-blue-100]="currentView === 'week'"
          class="px-4 py-2 border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"
        >
          Week
        </button>
        <button
          (click)="setView('day')"
          [class.bg-blue-100]="currentView === 'day'"
          class="px-4 py-2 border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"
        >
          Day
        </button>
      </div>
    </div>

    <!-- MONTH VIEW (fixed) -->
    <div *ngIf="currentView === 'month'">
      <!-- Calendar Days Header -->
      <div class="grid grid-cols-7 text-center py-2 border-b bg-gray-50">
        <div
          *ngFor="let day of weekDays"
          class="text-sm font-medium text-gray-500"
        >
          {{ day }}
        </div>
      </div>

      <!-- Calendar Grid -->
      <div class="grid grid-cols-7 border-b">
        <!-- Previous month days -->
        <div
          *ngFor="let day of previousMonthDays"
          class="calendar-day border p-2 other-month"
        >
          <div class="text-right font-medium">{{ day }}</div>
        </div>

        <!-- Current month days -->
        <div
          *ngFor="let day of daysInMonth; let i = index"
          class="calendar-day border p-2"
          [class.today]="isToday(i + 1, currentMonth, currentYear)"
        >
          <div class="text-right font-medium">{{ i + 1 }}</div>
          <!-- Events for this day -->
          <div class="mt-1">
            <div
              *ngFor="
                let event of getEventsForDay(i + 1, currentMonth, currentYear)
              "
              class="event"
              [style.background-color]="event.color"
              style="color: white"
              (click)="showEventDetails(event)"
            >
              {{ event.startTime }} {{ event.title }}
            </div>
          </div>
        </div>

        <!-- Next month days -->
        <div
          *ngFor="let day of nextMonthDays"
          class="calendar-day border p-2 other-month"
        >
          <div class="text-right font-medium">{{ day }}</div>
        </div>
      </div>
    </div>

    <!-- WEEK VIEW -->
    <div *ngIf="currentView === 'week'" class="p-4">
      <!-- Header Row -->
      <div class="grid grid-cols-8 gap-px bg-gray-200 rounded-t">
        <div
          class="bg-gray-50 py-2 text-center text-xs font-semibold text-gray-600"
        >
          Time
        </div>
        <div
          *ngFor="let day of weekDays"
          class="bg-gray-50 py-2 text-center text-xs font-semibold text-gray-600"
        >
          {{ day }}
        </div>
      </div>
      <!-- Time Rows -->
      <ng-container *ngFor="let hour of hours">
        <div class="grid grid-cols-8 gap-px bg-gray-200">
          <!-- Time Column -->
          <div
            class="bg-gray-50 h-16 text-xs text-gray-400 text-right pr-2 pt-2"
          >
            {{ hour }}:00
          </div>
          <!-- Day Columns -->
          <div *ngFor="let day of weekDays" class="bg-white h-16"></div>
        </div>
      </ng-container>
    </div>

    <!-- DAY VIEW -->
    <div *ngIf="currentView === 'day'" class="p-4">
      <div
        class="bg-gray-50 py-2 text-center text-xs font-semibold text-gray-600 rounded-t"
      >
        {{ selectedDate | date : "fullDate" }}
      </div>
      <div>
        <ng-container *ngFor="let hour of hours">
          <div class="grid grid-cols-2 gap-px bg-gray-200">
            <div
              class="bg-gray-50 h-16 text-xs text-gray-400 text-right pr-2 pt-2"
            >
              {{ hour }}:00
            </div>
            <div class="bg-white h-16"></div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
