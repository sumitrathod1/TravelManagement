<div class="calendar-outer">
  <div class="calendar-header">
    <button class="nav-btn" (click)="prevMonth()">
      <i class="bi bi-skip-backward-circle"></i>
    </button>
    <div class="month-label">{{ months[currentMonth] }} {{ currentYear }}</div>
    <button class="nav-btn" (click)="nextMonth()">
      <i class="bi bi-fast-forward-circle"></i>
    </button>
  </div>
  <div class="calendar-subtitle">
    <p>
      <span class="color-dot" style="background-color: #00bcd4"></span> Dzire
      <span class="color-dot" style="background-color: #f59e42"></span> Ertiga
      <span class="color-dot" style="background-color: #22c55e"></span> Innova
      <span class="color-dot" style="background-color: #a78bfa"></span> Fortuner
    </p>
  </div>
  <div class="calendar-grid">
    <div class="day-name" *ngFor="let day of dayNames">{{ day }}</div>
    <div
      class="calendar-cell"
      *ngFor="let date of calendarDates"
      [class.today]="isToday(date)"
      (click)="openDayPopup(date)"
    >
      <span>{{ date?.getDate() }}</span>
      <div class="dots">
        <span
          *ngFor="let dot of getBookingColors(date)"
          class="dot"
          [style.backgroundColor]="dot"
        ></span>
      </div>
    </div>
  </div>
</div>

<!-- Popup -->
<div class="popup-backdrop" *ngIf="showPopup" (click)="closePopup()"></div>
<div class="popup-container" *ngIf="showPopup">
  <div class="popup-header">
    <h3>{{ selectedDate | date : "fullDate" }}</h3>
    <button class="close" (click)="closePopup()">&times;</button>
  </div>
  <div class="popup-body">
    <div
      *ngFor="let booking of getBookingsForDate(selectedDate)"
      class="popup-booking"
      [ngStyle]="{
        borderLeft: '5px solid ' + booking.color,
        background: booking.bg
      }"
    >
      <div class="title">{{ booking.title }}</div>
      <div class="time">{{ booking.time }}</div>
      <div class="client">Client: {{ booking.client }}</div>
      <span class="color-dot" [style.backgroundColor]="booking.color"></span>
    </div>
  </div>
  <div class="popup-actions">
    <button class="add-btn">+ Add Booking</button>
    <button class="edit-btn">âœŽ Edit Day</button>
  </div>
</div>
