import{a as c}from"./chunk-WEZ5LNJ3.js";import{R as i,X as s,_ as p,da as u,j as r,k as n}from"./chunk-QUTPPCZH.js";var l=class a{constructor(e){this._http=e}baseUrl="http://ezygoa.icu/api/Booking/";bookingsCache$;bookingCountSubject=new n(0);bookingCount$=this.bookingCountSubject.asObservable();bookingUpdatedSubject=new r;bookingUpdated$=this.bookingUpdatedSubject.asObservable();newBooking(e){let t={bookingId:e.bookingId??0,customerName:e.customerName,customerNumber:e.customerNumber??"",bookingTime:e.travelTime?.split(" ")[0],from:e.From,to:e.to,pax:e.Pax,amount:e.amount,payment:e.payment?e.payment:0,bookingType:e.bookingType,alternateNumber:e.alternateNumber??"",bookingStatus:"string",externalEmployee:"string",externalEmployeeNumber:e.externalEmployeeNumber??"",AgentId:e.agent??"",customerWillPay:e.customerPay??0,ownerWillPay:e.ownerPay?+e.ownerPay:0,bookingDate:e.travelDate?(()=>{let o=new Date(e.travelDate);return o.setHours(12,0,0,0),o.toISOString().split("T")[0]})():null,vehicleId:e.vehcile,userId:e.driver};return console.log("Booking data to be sent (bookingData object):",t),this._http.post(`${this.baseUrl}New-Booking`,t).pipe(s(()=>this.bookingUpdatedSubject.next()))}loadBookings(){return this.bookingsCache$||(this.bookingsCache$=this._http.get(`${this.baseUrl}View-Bookings`).pipe(i(1))),this.bookingsCache$}clearBookingsCache(){this.bookingsCache$=void 0}updateBookingCount(e){this.bookingCountSubject.next(e)}static \u0275fac=function(t){return new(t||a)(u(c))};static \u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"})};export{l as a};
