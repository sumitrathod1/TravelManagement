import{$b as v,Bb as o,Cb as i,Db as l,Eb as M,Hb as p,Hc as w,Jb as u,Oc as O,Tb as c,Ub as m,Wb as k,Za as s,a as f,b as h,ia as x,ob as g,ra as b,sa as C,sb as d,ta as _,tb as y,ub as D}from"./chunk-QUTPPCZH.js";function T(r,t){if(r&1&&(o(0,"div",14),c(1),i()),r&2){let e=t.$implicit;s(),m(e)}}function E(r,t){if(r&1&&l(0,"span",18),r&2){let e=t.$implicit;y("background-color",e)}}function z(r,t){if(r&1){let e=M();o(0,"div",15),p("click",function(){let a=C(e).$implicit,S=u();return _(S.openDayPopup(a))}),o(1,"span"),c(2),i(),o(3,"div",16),g(4,E,1,2,"span",17),i()()}if(r&2){let e=t.$implicit,n=u();D("today",n.isToday(e)),s(2),m(e==null?null:e.getDate()),s(2),d("ngForOf",n.getBookingColors(e))}}var P={Dzire:"#00bcd4",Ertiga:"#f59e42",Crysta:"#22c55e",TT20:"#a78bfa",TT17:"#6366f1"},F=class r{newBookings=[];bookings=[];months=["January","February","March","April","May","June","July","August","September","October","November","December"];dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];currentMonth=new Date().getMonth();currentYear=new Date().getFullYear();calendarDates=[];showPopup=!1;selectedDate=null;ngOnChanges(t){t.newBookings&&(this.bookings=this.newBookings.map(e=>h(f({},e),{color:P[e.vehicle?.vehicleName]||P.Default,date:e.travelDate})))}constructor(){this.generateCalendar()}generateCalendar(){this.calendarDates=[];let e=new Date(this.currentYear,this.currentMonth,1).getDay(),n=new Date(this.currentYear,this.currentMonth+1,0).getDate();for(let a=0;a<e;a++)this.calendarDates.push(null);for(let a=1;a<=n;a++)this.calendarDates.push(new Date(this.currentYear,this.currentMonth,a))}prevMonth(){this.currentMonth===0?(this.currentMonth=11,this.currentYear--):this.currentMonth--,this.generateCalendar()}nextMonth(){this.currentMonth===11?(this.currentMonth=0,this.currentYear++):this.currentMonth++,this.generateCalendar()}isToday(t){if(!t)return!1;let e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}getBookingColors(t){return t?this.bookings.filter(e=>new Date(e.date).toDateString()===t.toDateString()).map(e=>e.color):[]}getBookingsForDate(t){return t?this.bookings.filter(e=>e.date.toDateString()===t.toDateString()):[]}openDayPopup(t){t&&(this.selectedDate=t,this.showPopup=!0)}closePopup(){this.showPopup=!1,this.selectedDate=null}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=x({type:r,selectors:[["app-calendar"]],inputs:{newBookings:"newBookings"},standalone:!0,features:[b,v],decls:21,vars:4,consts:[[1,"calendar-outer"],[1,"calendar-header"],[1,"nav-btn",3,"click"],[1,"bi","bi-skip-backward-circle"],[1,"month-label"],[1,"bi","bi-fast-forward-circle"],[1,"calendar-subtitle"],[1,"color-dot",2,"background-color","#00bcd4"],[1,"color-dot",2,"background-color","#f59e42"],[1,"color-dot",2,"background-color","#22c55e"],[1,"color-dot",2,"background-color","#a78bfa"],[1,"calendar-grid"],["class","day-name",4,"ngFor","ngForOf"],["class","calendar-cell",3,"today","click",4,"ngFor","ngForOf"],[1,"day-name"],[1,"calendar-cell",3,"click"],[1,"dots"],["class","dot",3,"backgroundColor",4,"ngFor","ngForOf"],[1,"dot"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return n.prevMonth()}),l(3,"i",3),i(),o(4,"div",4),c(5),i(),o(6,"button",2),p("click",function(){return n.nextMonth()}),l(7,"i",5),i()(),o(8,"div",6)(9,"p"),l(10,"span",7),c(11,"Dzire "),l(12,"span",8),c(13," TT20 "),l(14,"span",9),c(15,"Crysta "),l(16,"span",10),c(17," TT17 "),i()(),o(18,"div",11),g(19,T,2,1,"div",12)(20,z,5,4,"div",13),i()()),e&2&&(s(5),k("",n.months[n.currentMonth]," ",n.currentYear,""),s(14),d("ngForOf",n.dayNames),s(),d("ngForOf",n.calendarDates))},dependencies:[O,w],styles:[".calendar-outer[_ngcontent-%COMP%]{background:#fafaff;border-radius:18px;box-shadow:0 2px 16px #3c3c3c14;padding:18px 8px 12px;max-width:420px;margin:18px auto}.calendar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;font-size:1.2rem;font-weight:600;color:#222}.month-label[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:1.1rem;font-weight:700;color:#222}.nav-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:none;border-radius:50%;width:32px;height:32px;font-size:1.1rem;color:#6366f1;cursor:pointer;transition:background .2s}.nav-btn[_ngcontent-%COMP%]:hover{background:#e0e7ff}.calendar-subtitle[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:.98rem;margin:6px 0 12px}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:12px;background:#fff;border-radius:18px;padding:18px 10px 10px;min-width:0}.day-name[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:.98rem;margin-bottom:2px;letter-spacing:.01em}.calendar-cell[_ngcontent-%COMP%]{aspect-ratio:1/1;min-width:0;min-height:36px;max-width:44px;background:transparent;border-radius:8px;text-align:center;padding:2px 0 0;position:relative;cursor:pointer;transition:background .15s;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-weight:600;color:#222;font-size:1.02rem}.calendar-cell.today[_ngcontent-%COMP%]{border:2px solid #a5b4fc;background:#f3f4f6}.calendar-cell[_ngcontent-%COMP%]:hover{background:#f1f5f9}.calendar-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;color:#222;font-size:1.02rem}.dots[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2px;margin-top:2px;min-height:10px}.dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;display:inline-block}.color-dot[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;border:2px solid #fff;box-shadow:0 1px 4px #00000014;vertical-align:middle}p[_ngcontent-%COMP%]{font-size:small}"]})};export{F as a};
