import{a as E}from"./chunk-ZJZX7XR4.js";import{a as D}from"./chunk-ORPIU7QJ.js";import{b as T}from"./chunk-45ZUWZKY.js";import{o as I}from"./chunk-4Q7XPJD5.js";import{D as B}from"./chunk-OOG4BF3R.js";import"./chunk-SBERIC2F.js";import{b as F}from"./chunk-Y5AEHXNV.js";import{a as N}from"./chunk-ON6T2Y3X.js";import"./chunk-WEZ5LNJ3.js";import{$b as C,Bb as t,Cb as o,Db as p,Hc as M,Ic as O,Jb as u,Jc as P,Nc as w,Oc as S,Tb as n,Ub as l,Vb as c,Wb as h,Za as i,_a as m,_b as v,a as b,ac as _,b as f,bc as k,ec as y,ia as x,ob as g,sb as s}from"./chunk-QUTPPCZH.js";var A=a=>({"background-color":a});function H(a,r){a&1&&(t(0,"div",2),p(1,"div",3),o())}function z(a,r){if(a&1&&(t(0,"div",17)(1,"div",18),p(2,"div",19),t(3,"div",20)(4,"div",21)(5,"div")(6,"h3",22),n(7),o(),t(8,"h4",23),n(9),o(),t(10,"h4",23),n(11),o()(),t(12,"div",24)(13,"h2",25),n(14),o(),t(15,"h4",23),n(16),o()()()()()()),a&2){let e=r.$implicit;i(2),s("ngStyle",_(7,A,e.color)),i(5),l(e.customer.customerName),i(2),c(" ",e.customer.customerNumber," "),i(2),h(" ",e.travelDate,": ",e.traveltime," "),i(3),c("\u20B9",e.amount,""),i(2),c(" ",e.vehicle.vehicleName," ")}}function R(a,r){if(a&1&&(t(0,"div")(1,"div",4)(2,"div"),p(3,"app-calendar",5),o(),t(4,"div",6)(5,"div",7)(6,"div",8)(7,"div")(8,"div",9),n(9,"Bookings"),o(),t(10,"div",10),n(11),o()()()(),t(12,"div",7)(13,"div",11)(14,"div")(15,"div",12),n(16," Todays Bookings "),o(),t(17,"div",10),n(18),o()()()(),t(19,"div",7)(20,"div",13)(21,"div")(22,"div",9),n(23,"Todays Earning"),o(),t(24,"div",10),n(25),o()()()(),t(26,"div",7)(27,"div",14)(28,"div")(29,"div",9),n(30,"Revenue"),o(),t(31,"div",10),n(32),o()()()()(),t(33,"div",15)(34,"h3"),n(35,"Today's Bookings"),o()(),g(36,z,17,9,"div",16),k(37,"slice"),o()()),a&2){let e=u();i(3),s("newBookings",e.bookings),i(8),l(e.totalBookings),i(7),l(e.todayBookings),i(7),c("\u20B9",e.revenue==null?null:e.revenue.today,""),i(7),l(e.revenue.total),i(4),s("ngForOf",y(37,6,e.bookings,0,4))}}var j=class a{constructor(r,e){this._bookingservice=r;this._employeServices=e}bookings=[];revenue={};isLoading=!0;lineChartData={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Earnings",data:[12e3,15e3,11e3,17e3,14e3,19e3],borderColor:"#6366f1",backgroundColor:"rgba(99,102,241,0.12)",tension:.4,fill:!0,pointBackgroundColor:"#6366f1",pointBorderColor:"#fff",pointRadius:5}]};lineChartType="line";lineChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}},scales:{x:{},y:{beginAtZero:!0}}};totalBookings=0;totalEmployees=0;totalVehicles=0;todayBookings=0;ngOnInit(){this.isLoading=!0,this._bookingservice.bookingCount$.subscribe(r=>{this.totalBookings=r}),this._employeServices.employeCount$.subscribe(r=>{this.totalEmployees=r}),this.loadAllbookings()}loadAllbookings(){this.isLoading=!0;let r=["#00bcd4","#f59e42","#22c55e","#a78bfa","#ef4444","#6366f1"];this._bookingservice.loadBookings().subscribe({next:e=>{this.isLoading=!1,console.log("API Response:",e),this.bookings=e.bookings.map((d,L)=>f(b({},d),{color:r[L%r.length]})),this.revenue=e.revenueStats||{},this.totalBookings=this.bookings.length,this.todayBookings=this.bookings.filter(d=>new Date(d.date||d.travelDate).toDateString()===new Date().toDateString()).length},error:e=>{this.isLoading=!1,console.error("Error loading bookings:",e)}})}static \u0275fac=function(e){return new(e||a)(m(N),m(T))};static \u0275cmp=x({type:a,selectors:[["app-home"]],standalone:!0,features:[v([B()]),C],decls:2,vars:2,consts:[["class","loader-container",4,"ngIf"],[4,"ngIf"],[1,"loader-container"],[1,"spinner"],[1,"dashboard-container"],[3,"newBookings"],[1,"row","g-4"],[1,"col-6","col-md-6"],[1,"dashboard-card","border-emerald"],[1,"dashboard-label","fw-bold"],[1,"text-center"],[1,"dashboard-card","border-amber"],[1,"dashboard-label","fw-bold","text-center"],[1,"dashboard-card","border-pink"],[1,"dashboard-card","border-yellow"],[1,"d-flex","justify-content-between","align-items-center","mt-3","p-2"],["class","booking-card",4,"ngFor","ngForOf"],[1,"booking-card"],[1,"d-flex"],[1,"status-bar",3,"ngStyle"],[1,"booking-info","ms-2","flex-grow-1"],[1,"d-flex","justify-content-between"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[1,"text-end"],[1,"mt-2"]],template:function(e,d){e&1&&g(0,H,2,0,"div",0)(1,R,38,10,"div",1),e&2&&(s("ngIf",d.isLoading),i(),s("ngIf",!d.isLoading))},dependencies:[I,E,S,M,O,P,w,D,F],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1100px;margin:32px auto;padding:16px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #00000012}.dashboard-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;margin-bottom:32px}.dashboard-card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 8px #1976d212;padding:20px 28px;flex:1 1 220px;min-width:220px;border-left:6px solid #e0e0e0;display:flex;flex-direction:column;justify-content:space-between;height:100%;padding:1rem;border-radius:8px;justify-content:center;align-items:center}.border-emerald[_ngcontent-%COMP%]{border-color:#10b981}.border-blue[_ngcontent-%COMP%]{border-color:#1976d2}.border-purple[_ngcontent-%COMP%]{border-color:#8b5cf6}.border-amber[_ngcontent-%COMP%]{border-color:#f59e42}.border-pink[_ngcontent-%COMP%]{border-color:#f6b3e9}.border-yellow[_ngcontent-%COMP%]{border-color:#fff454}.dashboard-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.dashboard-label[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:4px}.dashboard-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#222}.dashboard-icon[_ngcontent-%COMP%]{height:48px;width:48px;border-radius:50%;background:#e0e0e0}.dashboard-icon.emerald[_ngcontent-%COMP%]{background:#d1fae5}.dashboard-icon.blue[_ngcontent-%COMP%]{background:#e3eaf6}.dashboard-icon.purple[_ngcontent-%COMP%]{background:#ede9fe}.dashboard-icon.amber[_ngcontent-%COMP%]{background:#fef3c7}.dashboard-card-footer[_ngcontent-%COMP%]{margin-top:16px;color:#888;font-size:.95rem}@media (max-width: 900px){.dashboard-stats[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.dashboard-card[_ngcontent-%COMP%]{min-width:0;width:100%}}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;transition:transform .3s ease,box-shadow .5s ease;cursor:pointer}.chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #6366f133}.shadow-effect[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a}canvas[_ngcontent-%COMP%]{max-height:300px}.booking-card[_ngcontent-%COMP%]{border-radius:10px;padding:10px;margin-bottom:12px;background-color:#f9f9f9;box-shadow:0 7px 6px #0000001a}.status-bar[_ngcontent-%COMP%]{width:4px;border-radius:4px;margin-right:10px}.col-md-6[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #6366f100}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.spinner[_ngcontent-%COMP%]{border:6px solid #eee;border-top:6px solid #6366f1;border-radius:50%;width:48px;height:48px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};export{j as HomeComponent};
