import{b as L,c as F,d as A}from"./chunk-3SHNEIU6.js";import{h as N}from"./chunk-H6HNTYG3.js";import{c as w,i as B,k as O,o as P}from"./chunk-4Q7XPJD5.js";import{C as D}from"./chunk-OOG4BF3R.js";import{r as S,s as _}from"./chunk-SBERIC2F.js";import{a as T,b as I}from"./chunk-Y5AEHXNV.js";import{a as E}from"./chunk-ON6T2Y3X.js";import{g as y,j as M}from"./chunk-GGO3Y67A.js";import"./chunk-WEZ5LNJ3.js";import{$b as x,Bb as o,Cb as a,Db as l,Ic as v,Jb as u,Oc as k,Tb as s,Ub as h,Za as p,_a as m,ia as g,ob as b,oc as C,sb as c}from"./chunk-QUTPPCZH.js";function J(d,t){d&1&&(o(0,"div",2),l(1,"div",3),a())}function $(d,t){if(d&1&&(o(0,"div")(1,"div",4)(2,"div",5)(3,"div",6)(4,"a",7)(5,"div",8),l(6,"i",9),o(7,"h6",10),s(8,"Total Bookings"),a(),o(9,"h5",11),s(10),a()()()(),o(11,"div",6)(12,"a",12)(13,"div",8),l(14,"i",13),o(15,"h6",10),s(16,"Booking Statistics"),a(),o(17,"h5",11),s(18,"VV"),a()()()()(),o(19,"div",14)(20,"div",15)(21,"div",16)(22,"h5"),s(23,"Monthly Bookings"),a(),l(24,"canvas",17),a()(),o(25,"div",15)(26,"div",16)(27,"h5"),s(28,"Bookings Distribution"),a(),l(29,"canvas",17),a()()()()()),d&2){let e=u();p(10),h(e.totalBookings),p(14),c("data",e.barChartData)("type",e.barChartType)("options",e.barChartOptions),p(5),c("data",e.pieChartData)("type",e.pieChartType)("options",e.pieChartOptions)}}var R=class d{constructor(t,e){this._bookingService=t;this.cdr=e}totalBookings=0;isLoading=!1;ngOnInit(){this.isLoading=!0,this._bookingService.bookingCount$.subscribe(t=>{this.totalBookings=t}),this._bookingService.loadBookings().subscribe({next:t=>{let e=t.bookings||[],n=Array(12).fill(0);this.totalBookings=e.length,e.forEach(i=>{if(i.travelDate&&i.travelDate!=="0001-01-01"){let f=new Date(i.travelDate).getMonth();n[f]++}}),this.barChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Bookings",data:n,backgroundColor:"#6366f1"}]};let r={};e.forEach(i=>{i.bookingType&&(r[i.bookingType]=(r[i.bookingType]||0)+1)}),this.pieChartData={labels:Object.keys(r),datasets:[{data:Object.values(r),backgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"],hoverBackgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"]}]},this.isLoading=!1,this.cdr.detectChanges()},error:()=>{this.isLoading=!1}})}barChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Bookings",data:Array(12).fill(0),backgroundColor:"#6366f1"}]};barChartType="bar";barChartOptions={responsive:!0,plugins:{legend:{display:!1}},scales:{x:{},y:{beginAtZero:!0}}};pieChartData={labels:[],datasets:[{data:[],backgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"],hoverBackgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"]}]};pieChartType="pie";pieChartOptions={responsive:!0,plugins:{legend:{position:"bottom",labels:{generateLabels:t=>{let e=t.data;return e.labels.map((n,r)=>{let i=e.datasets[0].data[r],f=e.datasets[0].backgroundColor[r];return{text:`${n}: ${i}`,fillStyle:f,strokeStyle:f,index:r}})}}},tooltip:{enabled:!0,mode:"nearest",intersect:!0,callbacks:{label:function(t){let e=t.label||"",n=t.parsed||0;return`${e}: ${n}`}}}},interaction:{mode:"nearest",intersect:!0}};static \u0275fac=function(e){return new(e||d)(m(E),m(C))};static \u0275cmp=g({type:d,selectors:[["app-booking"]],standalone:!0,features:[x],decls:2,vars:2,consts:[["class","loader-container",4,"ngIf"],[4,"ngIf"],[1,"loader-container"],[1,"spinner"],[1,"container","mt-4"],[1,"row","g-3"],[1,"col-6","col-md-3"],["routerLink","/booking-table",1,"card","text-center","shadow-sm","text-decoration-none",2,"cursor","pointer"],[1,"card-body"],[1,"bi","bi-car-front","fs-2","text-primary"],[1,"mt-2"],[1,"fw-bold"],["routerLink","/earnings",1,"card","text-center","shadow-sm",2,"cursor","pointer"],[1,"bi","bi-calendar-event","fs-2","text-success"],[1,"row","g-4","mt-2"],[1,"col-12","col-md-6"],[1,"card","p-3","chart-card","shadow-effect"],["baseChart","",3,"data","type","options"]],template:function(e,n){e&1&&b(0,J,2,0,"div",0)(1,$,30,7,"div",1),e&2&&(c("ngIf",n.isLoading),p(),c("ngIf",!n.isLoading))},dependencies:[A,S,M,y,D,B,P,N,O,L,_,w,F,k,v,I,T],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;overflow-x:hidden;min-height:100vh;font-family:Poppins,Inter,Segoe UI,sans-serif;background:radial-gradient(circle at 30% 30%,rgba(99,102,241,.75),transparent 50%),radial-gradient(circle at 80% 65%,rgba(255,99,132,.75),transparent 45%),linear-gradient(135deg,#5f72be,#9b23ea);background-blend-mode:screen;animation:_ngcontent-%COMP%_backgroundGlow 12s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_backgroundGlow{0%,to{background-position:30% 30%,80% 65%}50%{background-position:40% 40%,90% 70%}}.dashboard-container[_ngcontent-%COMP%]{max-width:460px;margin:40px auto;padding:18px 14px;background:#ffffffeb;border-radius:32px;box-shadow:0 8px 24px #6366f166,0 0 50px #6366f130;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff,#dce5ff);border-radius:20px;padding:22px 16px;box-shadow:8px 8px 16px #0000001a,-8px -8px 20px #ffffffe6;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);cursor:pointer;border:1.2px solid transparent;position:relative;overflow:hidden}.card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 30px #00000029,-10px -10px 30px #ffffffb3;border-color:#6355ff}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#3c3c72;margin-bottom:9px;text-shadow:0 2px 6px rgba(155,35,234,.18)}.card-text[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:800;color:#4a4a8e;text-shadow:0 2px 8px rgba(99,102,241,.24)}.card-icon[_ngcontent-%COMP%]{font-size:2rem;color:#6355ff;filter:drop-shadow(0 0 6px #8058ffb5);margin-bottom:12px}@media (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]{margin:0;border-radius:18px;padding:14px 12px}.card[_ngcontent-%COMP%]{border-radius:16px;padding:18px 12px}}"],changeDetection:0})};export{R as BookingComponent};
