import{a as y,b as k}from"./chunk-Y5AEHXNV.js";import{a as C}from"./chunk-3QCMMDH6.js";import"./chunk-WEZ5LNJ3.js";import{$b as f,Bb as t,Cb as e,Db as l,Oc as h,Tb as n,Ub as g,Vb as s,Za as a,_a as u,ia as b,sb as p}from"./chunk-QUTPPCZH.js";var S=class v{constructor(o){this._bookinServices=o}bookingsAvgStats={};bookingRevenueStats={};ngOnInit(){this.loadAllbookings(),console.log("EarningsComponent initialized")}loadAllbookings(){this._bookinServices.loadBookings().subscribe({next:o=>{this.bookingsAvgStats=o.averageStats||{},this.bookingRevenueStats=o.revenueStats||{};let r=o.bookings||[],i=Array(12).fill(0);r.forEach(d=>{if(d.travelDate){let c=new Date(d.travelDate).getMonth();i[c]+=d.amount||0}}),this.lineChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Earnings",data:i,borderColor:"#6366f1",backgroundColor:"rgba(99,102,241,0.12)",tension:.4,fill:!0,pointBackgroundColor:"#6366f1",pointBorderColor:"#fff",pointRadius:5}]};let m={};r.forEach(d=>{let c=d.vehicle?.vehicleName||"Unknown";m[c]=(m[c]||0)+1}),this.pieChartData={labels:Object.keys(m),datasets:[{data:Object.values(m),backgroundColor:["#6366f1","#fbbf24","#22c55e","#a78bfa"]}]}},error:o=>{console.error("Error loading bookings:",o)}})}stats={monthly:24580,monthLabel:"January 2024",weekly:6240,weekLabel:"This week",daily:892,dayLabel:"Today",avgDaily:148,avgWeekly:1040,avgMonthly:4096,avgYearly:49152};lineChartData={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Earnings",data:[12e3,15e3,11e3,17e3,14e3,19e3],borderColor:"#6366f1",backgroundColor:"rgba(99,102,241,0.12)",tension:.4,fill:!0,pointBackgroundColor:"#6366f1",pointBorderColor:"#fff",pointRadius:5}]};lineChartType="line";lineChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"}},scales:{x:{ticks:{autoSkip:!1}},y:{beginAtZero:!0}}};pieChartData={labels:[],datasets:[{data:[],backgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"],hoverBackgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"]}]};pieChartType="pie";pieChartOptions={responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{enabled:!0,mode:"nearest",intersect:!0,callbacks:{label:function(o){let r=o.label||"",i=o.parsed||0;return`${r}: ${i}`}}}},interaction:{mode:"nearest",intersect:!0}};static \u0275fac=function(r){return new(r||v)(u(C))};static \u0275cmp=b({type:v,selectors:[["app-earnings"]],standalone:!0,features:[f],decls:71,vars:16,consts:[[1,"container","py-3"],[1,"row","g-3"],[1,"col-12"],[1,"card","p-3","mb-3","shadow-sm","monthly-revenue"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","small","mb-1"],[1,"bi","bi-currency-rupee"],[1,"badge","bg-light-success","ms-2"],[1,"fs-2","fw-bold"],[1,"text-muted"],[1,"col-6"],[1,"card","p-3","mb-3","shadow-sm","text-center","week-day"],[1,"fs-4","fw-bold"],[1,"card","p-3","mb-3","shadow-sm","AverageBooking"],[1,"text-muted","mb-2"],[1,"row","text-center"],[1,"col-6","col-md-3","mb-2"],[1,"fw-bold"],[1,"text-muted","small"],[1,"card","p-3","mb-3","shadow-sm","linechart"],[1,"bi","bi-graph-up"],["baseChart","",3,"data","type","options"],[1,"card","p-3","mb-3","shadow-sm","barchart"],[1,"bi","bi-pie-chart"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"div",5),l(7,"i",6),n(8," Monthly Earnings "),t(9,"span",7),n(10,"+12.5%"),e()(),t(11,"div",8),n(12),e(),t(13,"div",9),n(14),e()()()()(),t(15,"div",10)(16,"div",11)(17,"div",5),l(18,"i",6),n(19," Weekly "),e(),t(20,"div",12),n(21),e(),t(22,"div",9),n(23),e()()(),t(24,"div",10)(25,"div",11)(26,"div",5),l(27,"i",6),n(28," Daily "),e(),t(29,"div",12),n(30),e(),t(31,"div",9),n(32),e()()(),t(33,"div",2)(34,"div",13)(35,"div",14),l(36,"i",6),n(37," Average Booking Amount "),e(),t(38,"div",15)(39,"div",16)(40,"div",17),n(41),e(),t(42,"div",18),n(43,"Daily Avg"),e()(),t(44,"div",16)(45,"div",17),n(46),e(),t(47,"div",18),n(48,"Weekly Avg"),e()(),t(49,"div",16)(50,"div",17),n(51),e(),t(52,"div",18),n(53,"Monthly Avg"),e()(),t(54,"div",16)(55,"div",17),n(56),e(),t(57,"div",18),n(58,"Yearly Avg"),e()()()()(),t(59,"div",2)(60,"div",19)(61,"div",14),l(62,"i",20),n(63," Earnings Trend "),e(),l(64,"canvas",21),e()(),t(65,"div",2)(66,"div",22)(67,"div",14),l(68,"i",23),n(69," Booking Distribution "),e(),l(70,"canvas",21),e()()()()),r&2&&(a(12),s("\u20B9",i.bookingRevenueStats.month,""),a(2),g(i.stats.monthLabel),a(7),s("\u20B9",i.bookingRevenueStats.week,""),a(2),g(i.stats.weekLabel),a(7),s("\u20B9",i.bookingRevenueStats.today,""),a(2),g(i.stats.dayLabel),a(9),s("\u20B9",i.bookingsAvgStats.dailyAvg,""),a(5),s("\u20B9",i.bookingsAvgStats.weeklyAvg,""),a(5),s("\u20B9",i.bookingsAvgStats.monthlyAvg,""),a(5),s("\u20B9",i.bookingsAvgStats.yearlyAvg,""),a(8),p("data",i.lineChartData)("type",i.lineChartType)("options",i.lineChartOptions),a(6),p("data",i.pieChartData)("type",i.pieChartType)("options",i.pieChartOptions))},dependencies:[k,y,h],styles:[".card[_ngcontent-%COMP%]{border-radius:14px}.bg-light-success[_ngcontent-%COMP%]{background:#e6f9ed;color:#22c55e}.fs-2[_ngcontent-%COMP%]{font-size:2rem}.fs-4[_ngcontent-%COMP%]{font-size:1.5rem}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000000a}.chart-card[_ngcontent-%COMP%]{background:#e5dada;border-radius:12px;transition:transform .3s ease,box-shadow .5s ease;cursor:pointer}.chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #6366f133}.shadow-effect[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a}canvas[_ngcontent-%COMP%]{max-height:300px}.linechart[_ngcontent-%COMP%], .barchart[_ngcontent-%COMP%]{background-color:#f0f8ff}.monthly-revenue[_ngcontent-%COMP%]{background-color:#98fb98}.week-day[_ngcontent-%COMP%]{background-color:pink}.AverageBooking[_ngcontent-%COMP%]{background-color:#90ee90;color:#0b1843}"]})};export{S as EarningsComponent};
