import{a as h,b as C}from"./chunk-Y5AEHXNV.js";import{a as k}from"./chunk-ON6T2Y3X.js";import{f as g}from"./chunk-GGO3Y67A.js";import"./chunk-WEZ5LNJ3.js";import{$b as v,Bb as a,Cb as n,Db as c,Tb as r,Vb as m,Za as l,_a as d,ia as u,sb as b}from"./chunk-QUTPPCZH.js";var y=class p{constructor(i,t){this._bookingServices=i;this.router=t;let e=this.router.getCurrentNavigation();this.expenses=e?.extras.state?.expenses||[]}expenses=0;earnings=0;get totalEarnings(){return this.earnings-this.expenses}ngOnInit(){this.loadBooking(),console.log("totalEarnings:",this.totalEarnings)}loadBooking(){this._bookingServices.loadBookings().subscribe({next:i=>{let t=i.bookings||[],e={};this.earnings=i.revenueStats.total||0,t.forEach(o=>{let s=o.vehicle?.vehicleName||"Unknown";e[s]=(e[s]||0)+(o.amount||0)}),this.pieChartData={labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"],hoverBackgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"]}]}},error:i=>{console.error("Error loading bookings:",i)}})}pieChartData={labels:[],datasets:[{data:[],backgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"],hoverBackgroundColor:["#6366f1","#fbbf24","#22c55e","#f43f5e","#a78bfa","#f59e42","#ef4444"]}]};pieChartType="pie";pieChartOptions={responsive:!0,plugins:{legend:{position:"bottom",labels:{generateLabels:i=>{let t=i.data;return t.labels.map((e,o)=>{let s=t.datasets[0].data[o],f=t.datasets[0].backgroundColor[o];return{text:`${e}: \u20B9${s}`,fillStyle:f,strokeStyle:f,index:o}})}}},tooltip:{enabled:!0,mode:"nearest",intersect:!0,callbacks:{label:function(i){let t=i.label||"",e=i.parsed||0;return`${t}: \u20B9${e}`}}}},interaction:{mode:"nearest",intersect:!0}};static \u0275fac=function(t){return new(t||p)(d(k),d(g))};static \u0275cmp=u({type:p,selectors:[["app-vehicle-statistics"]],standalone:!0,features:[v],decls:23,vars:5,consts:[[1,"container","mt-4"],[1,"row","g-4","mt-2"],[1,"col-6"],[1,"card","p-3","mb-3","shadow-sm","text-center","week-day"],[1,"text-muted","small","mb-1"],[1,"bi","bi-currency-rupee"],[1,"fs-4","fw-bold","text-success"],[1,"text-muted"],[1,"fs-4","fw-bold","text-danger"],[1,"col-12","col-md-6"],[1,"card","p-3","chart-card","shadow-effect"],["baseChart","",3,"data","type","options"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),c(5,"i",5),n(),a(6,"div",6),r(7),n(),a(8,"div",7),r(9,"total Earnings"),n()()(),a(10,"div",2)(11,"div",3)(12,"div",4),c(13,"i",5),n(),a(14,"div",8),r(15),n(),a(16,"div",7),r(17,"total Expenses"),n()()(),a(18,"div",9)(19,"div",10)(20,"h5"),r(21,"Bookings Distribution"),n(),c(22,"canvas",11),n()()()()),t&2&&(l(7),m("\u20B9 ",e.totalEarnings,""),l(8),m("\u20B9 ",e.expenses,""),l(7),b("data",e.pieChartData)("type",e.pieChartType)("options",e.pieChartOptions))},dependencies:[C,h]})};export{y as VehicleStatisticsComponent};
